# Scripts
This directory contains a number of scripts that serve as wrappers for one of the tools in the rest of the repository. All of these scripts should have symbolic links inside your `~/bin` directory which should be on your path as that is how Silver itself works.

### Table of Contents
  - [`gen-atom-language-package`](#generate-an-atom-language-package)
  - [`gen-atom-lsp-package`](#generate-an-atom-lsp-package)
  - [`gen-treesitter-parser`](#generate-a-treesitter-parser)
  - [`hook-into-genericLanguageServer`](#hook-into-generic-language-server)
  - [`slide`](#run-slide)


### Generate an Atom Language Package
This script (`gen-atom-language-package`) creates an Atom package that
 "understands" your language. It utilizes a cson file produced by Slide
 to "understand" your language. Thus, one must first run Slide to generate
 the cson file, then run this wrapper script to create an Atom language package.

This script is run as follows.

`gen-atom-language-package [lang name] [scope name]`

The language name is the first argument and must match the language name used
when running Silver with the `--treesitter-spec` as is done in the
`gen-treesitter-parser` script.
If it does not an incorrect parser if one exists with the language name
specified will be used.

The scope name is the second argument and is the NPM scope where your Treesitter parser is published.
Thus, it is paramount that this scope name match the scope provided to the `gen-treesitter-parser` script.


### Generate a Treesitter Parser

This script (`gen-treesitter-parser`) creates a Treesitter incremental parser for your
language and publishes it to the NPM registry.
The only part of a Treesitter parser that needs to be created is the `grammar.js` file which
is generated by Silver using the `--treesitter-spec [language name]` command line option.
This `grammar.js` file contains an equivalent grammar to the one written in Silver but
utilizing Treesitter notation.
This script should be run from the same directory where the `grammar.js` is which should
be in the same directory you ran the Silver command from.

`gen-treesitter-parser [command line options]`

#### Command Line Options
##### Required

  - `--scope [scope name]`: This is your scope within NPM that your parser will be published to.
  The scope name will be your username or organizational name on NPM.
  It is used to avoid name conflicts with others who may have the same language name
  with a different parser specification.
  - `--lang [language name]`: This is the name of your language.
  It is used as the suffix for your package. For example, if your language is `ablec` your
  generated NPM package will have the name `tree-sitter-ablec`. Note language names CANNOT
  contain capital letters due to NPM package naming rules.


##### Optional
  - `--publish`: This actually publishes your parser to the NPM registry.
   The script will stop and ask for you NPM username and password before continuing.
   This can be avoided if you set up an authorization token with NPM.
  - `--force-publish`: This option is necessary if there is already a Treesitter parser with this name inside your scope,
  but there is no repository locally so the publish attempt will fail due to the versioning being wrong.
  Thus, the script will not try and fail to publish the parser.
  However, if you manually control the version number and are sure this is what you want to do, you can override and force a publish attempt with `--force-publish`.
  - `--version [version number/version update type]`: This can be used to specify a specific version number of the Treesitter parser on the NPM registry.
  This can be useful if a conflict arises in the versioning.
  You can specify either a specific version number, e.g. `-version 1.2.3` or a version update type which can be `patch`, `minor`, or `major`, e.g. -version patch which would change the version number from `1.2.3` to `1.2.4`. The default version update when this script is called is `minor`.

### Generate an Atom LSP Package
This script (`gen-atom-lsp-package`) creates an Atom package
that copies the `genericAtomLSPPackage` and makes changes to
put the language name where it is necessary in the package
and moves this specific copy to the generated directory.

The script is run as follows.

`gen-atom-lsp-package [lang name]`

The language name is the first argument and must match the
language name used when running Silver with the
`--treesitter-spec` and in the `gen-atom-language-package`
script.

This script needs to be used after you use the
`hook-into-genericLanguageServer` which builds a
language server to build the Atom package that utilizes
this langauge server.

### Hook Into Generic Language Server
This script (`hook-into-genericLanguageServer`) copies the
generic language server and makes the necessary changes for
it to work with the jar built from your Silver
implementation. Note this jar should be built with the
`--one-jar` flag so that it includes the Silver runtime as
well.

This script is run as follows

`hook-into-genericLanguageServer [jarName]`

This script must be run from the directory where the jar is
located. This will place a language server into the
`generated` directory of your `silver-ide` branch. To use
this server in Atom use the `gen-atom-lsp-package` script
from the directory where the `AtomPackageLSPMain.js` file was
output after running with slide with the `--atom-lsp-file`
flag.

### Run slide
Slide (Specification Language for IDEs) generates IDE specification files based on the slide files written about your Silver language.

Slide currently only generates a `[lang name].cson` file which provides highlighting directives to Atom.

Slide can also be used to modify a `grammar.js` file containing a Treesitter
grammar using the `--treesitter` flag,
more details are provided below under command line options.

For more information about Slide read the [README](../slide)
in the slide directory.
#### Command Line Options
- `-I <path>`:
Instructs Slide to look for specification files in the specified directory. Can be included more than once to specify multiple directories.
- `--treesitter <grammar.js file>`: Running slide with this flag will make all
ignore terminals with a specification property of `highlightable` appear in
the concrete syntax tree used by Treesitter by default these are not kept for
efficiency reasons.
