# Scripts
This directory contains a number of scripts that serve as wrappers for one of the tools in the rest of the repository. All of these scripts should have symbolic links inside your `~/bin` directory which should be on your path as that is how Silver itself works.

#### Table of Contents
  - [`gen-atom-language-package`](#generate-an-atom-language-package)
  - [`gen-treesitter-parser`](#generate-a-treesitter-parser)
  - [`slide`](#run-slide)


#### Generate an Atom Language Package
This script (`gen-atom-language-package`) is wrapper for silver-ide which creates or updates an Atom package using the files output from silver-ide.
This script is run as follows.

`gen-atom-language-package [lang name] [scope name] [silver ide options]`

The language name is the first argument and should match the language name used when running Silver with the `--treesitter-spec` as is done in the `gen-treesitter-parser` script.

The scope name is the second argument and is the NPM scope where your Treesitter parser is published.
Thus, it is paramount that this scope name match the scope provided to the `gen-treesitter-parser` script.

After, this you provide command line options like you are running the [`silver-ide`](#run-slide) script.

#### Generate a Treesitter Parser

This script (`gen-treesitter-parser`) creates a Treesitter incremental parser for your language and publishes it to the NPM registry.
The only part of a Treesitter parser that needs to be provided is the `grammar.js` file which is generated by Silver using the `--treesitter-spec [language name]` command line option.
This script takes in the Silver command to run to generate the `grammar.js` file and then other command line options. The script is run as follows

`gen-treesitter-parser "silver command" [command line options]`

The "silver command" is the command used to generate a file, named `grammar.js`,
containing an equivalent grammar written so Tree-sitter can generate a parser from it.
To generate this file, pass the `--treesitter-spec` flag to Silver with the language name following it.

`silver [-I grammar directories] --treesitter-spec [language name] [grammar with parser specification]`

##### Command Line Options
The `--scope [scope name]` command line option is required. All other options are optional.

  - `--scope [scope name]`: This is your scope within NPM that your parser will be published to.
  The scope name will be your username on NPM or if you have an orginzation that works as well.
  This is required.
  - `--publish`: This actually publishes your parser to the NPM registry.
   The script will stop and ask for you NPM username and password before continuing.
   This can be avoided if you set up an authorization token with NPM.
  - `--force`: This option is necessary if there is already a Treesitter parser with this name inside your scope,
  but there is no repository locally so the publish attempt will fail due to the versioning being wrong.
  Thus, the script will not try and fail to publish the parser.
  However, if you manually control the version number and sure this is what you want to do, you can override and force a publish attempt with `--force`. You still need to include `--publish`.
  - `--version [version number/version update type]`: This can be used to specify a specific version number of the Treesitter parser on the NPM registry.
  This can be useful if a conflict arises in the versioning.
  You can specify either a specific version number, e.g. `-version 1.2.3` or a version update type which can be `patch`, `minor`, or `major`, e.g. -version patch which would change the version number from `1.2.3` to `1.2.4`. The default version update when this script is called is `minor`.

#### Run slide
Slide (Specification Language for IDEs) generates IDE specification files based on the slide files written about your Silver language.

Slide currently only generates a `[lang name].cson` file which provides highlighting directives to Atom.

##### Command Line Options
- `-I <path>`:
Instructs Slide to look for specification files in the specified directory. Can be included more than once to specify multiple directories.
- `--ext <ext>`: Tells Slide that slide files end with the specified extension. This is useful for developing multiple IDE specifications for a single language and using different extensions to differentiate between them.
The MELT group uses this feature to develop a regular IDE specification and a demo IDE specification.
